{"ast":null,"code":"var _jsxFileName = \"/Users/krmpi/PycharmProjects/FER/moonstone-CCS/client/src/components/Gantt/Gantt.js\";\nimport React, { Component } from 'react';\nimport { gantt } from 'dhtmlx-gantt';\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\nexport default class Gantt extends Component {\n  componentDidMount() {\n    gantt.config.xml_date = \"%Y-%m-%d %H:%i\";\n    const {\n      tasks\n    } = this.props;\n    gantt.init(this.ganttContainer);\n    gantt.parse(tasks);\n    this.configSetup();\n  }\n\n  render() {\n    this.setColumns();\n    const {\n      zoom\n    } = this.props;\n    this.setZoom(zoom);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: input => {\n        this.ganttContainer = input;\n      },\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 13\n      }\n    });\n  }\n\n  setZoom(value) {\n    switch (value) {\n      case 'Hours':\n        gantt.config.scale_unit = 'day';\n        gantt.config.date_scale = '%d %M';\n        gantt.config.scale_height = 60;\n        gantt.config.min_column_width = 30;\n        gantt.config.subscales = [{\n          unit: 'hour',\n          step: 1,\n          date: '%H'\n        }];\n        break;\n\n      case 'Days':\n        gantt.config.min_column_width = 70;\n        gantt.config.scale_unit = 'week';\n        gantt.config.date_scale = '#%W';\n        gantt.config.subscales = [{\n          unit: 'day',\n          step: 1,\n          date: '%d %M'\n        }];\n        gantt.config.scale_height = 60;\n        break;\n\n      case 'Months':\n        gantt.config.min_column_width = 70;\n        gantt.config.scale_unit = 'month';\n        gantt.config.date_scale = '%F';\n        gantt.config.scale_height = 60;\n        gantt.config.subscales = [{\n          unit: 'week',\n          step: 1,\n          date: '#%W'\n        }];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return this.props.zoom !== nextProps.zoom;\n  }\n\n  componentDidUpdate() {\n    gantt.render();\n  }\n\n  setColumns() {\n    console.log(gantt.config.columns);\n    gantt.config.columns = [{\n      name: \"text\",\n      label: \"Task name\",\n      tree: true,\n      width: 150\n    }, {\n      name: \"start_date\",\n      label: \"Start time\",\n      align: \"center\",\n      resize: true,\n      width: 120\n    }, {\n      name: \"end_date\",\n      label: \"End date\",\n      align: \"center\",\n      resize: true,\n      width: 120\n    }, //{name:\"priority\",    height:22, type:\"select\",   map_to:\"priority\", options:priority, default_value:\"Low\"},\n    {\n      name: \"add\",\n      label: \"\",\n      width: 44\n    }];\n  }\n\n  configSetup() {\n    gantt.config.wide_form = 1;\n    gantt.config.work_time = true;\n    gantt.config.order_branch = true;\n    gantt.config.autoscroll = true;\n    gantt.config.auto_scheduling = true;\n    gantt.config.autoscroll_speed = 100;\n    gantt.config.fit_tasks = true;\n    gantt.config.scale_unit = zoom.scale_unit;\n    gantt.config.duration_unit = \"hour\";\n    gantt.config.scale_height = 50;\n    gantt.config.min_column_width = 1000;\n    gantt.config.date_scale = zoom.date_scale;\n    gantt.config.open_tree_initially = true;\n    gantt.config.subscales = zoom.subscales;\n\n    gantt.templates.task_cell_class = function (task, date) {\n      if (!gantt.isWorkTime({\n        task: task,\n        date: date\n      })) return \"week_end\";\n      return \"\";\n    };\n\n    gantt.setWorkTime({\n      hours: [9, 17]\n    });\n    gantt.setWorkTime({\n      day: 6,\n      hours: false\n    });\n    gantt.setWorkTime({\n      day: 7,\n      hours: false\n    });\n    gantt.locale.labels[\"milestone\"] = \"Milestone\";\n    gantt.config.buttons_left = [\"dhx_save_btn\", \"dhx_cancel_btn\", \"milestone\"];\n    gantt.config.buttons_right = [\"dhx_delete_btn\"];\n    addTodayMarker();\n  }\n\n}","map":{"version":3,"sources":["/Users/krmpi/PycharmProjects/FER/moonstone-CCS/client/src/components/Gantt/Gantt.js"],"names":["React","Component","gantt","Gantt","componentDidMount","config","xml_date","tasks","props","init","ganttContainer","parse","configSetup","render","setColumns","zoom","setZoom","input","width","height","value","scale_unit","date_scale","scale_height","min_column_width","subscales","unit","step","date","shouldComponentUpdate","nextProps","componentDidUpdate","console","log","columns","name","label","tree","align","resize","wide_form","work_time","order_branch","autoscroll","auto_scheduling","autoscroll_speed","fit_tasks","duration_unit","open_tree_initially","templates","task_cell_class","task","isWorkTime","setWorkTime","hours","day","locale","labels","buttons_left","buttons_right","addTodayMarker"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { gantt } from 'dhtmlx-gantt';\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\n\nexport default class Gantt extends Component {\n    componentDidMount() {\n        gantt.config.xml_date = \"%Y-%m-%d %H:%i\";\n        const { tasks } = this.props;\n        gantt.init(this.ganttContainer);\n        gantt.parse(tasks);\n        this.configSetup();\n    }\n\n    render() {\n        this.setColumns();\n        const { zoom } = this.props;\n        this.setZoom(zoom);\n        return (\n            <div\n                ref={(input) => { this.ganttContainer = input }}\n                style={{ width: '100%', height: '100%' }}\n            ></div>\n        );\n    }\n\n    setZoom(value) {\n        switch (value) {\n            case 'Hours':\n                gantt.config.scale_unit = 'day';\n                gantt.config.date_scale = '%d %M';\n\n                gantt.config.scale_height = 60;\n                gantt.config.min_column_width = 30;\n                gantt.config.subscales = [\n                    { unit:'hour', step:1, date:'%H' }\n                ];\n            break;\n            case 'Days':\n                gantt.config.min_column_width = 70;\n                gantt.config.scale_unit = 'week';\n                gantt.config.date_scale = '#%W';\n                gantt.config.subscales = [\n                    { unit: 'day', step: 1, date: '%d %M' }\n                ];\n                gantt.config.scale_height = 60;\n            break;\n            case 'Months':\n                gantt.config.min_column_width = 70;\n                gantt.config.scale_unit = 'month';\n                gantt.config.date_scale = '%F';\n                gantt.config.scale_height = 60;\n                gantt.config.subscales = [\n                    { unit:'week', step:1, date:'#%W' }\n                ];\n            break;\n            default:\n            break;\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return this.props.zoom !== nextProps.zoom;\n    }\n\n    componentDidUpdate() {\n        gantt.render();\n    }\n\n    setColumns(){\n        console.log(gantt.config.columns)\n\n        gantt.config.columns =  [\n        {name:\"text\",       label:\"Task name\",  tree:true, width: 150 },\n        {name:\"start_date\", label:\"Start time\", align:\"center\", resize: true, width: 120 },\n        {name:\"end_date\",   label:\"End date\",   align:\"center\", resize: true, width: 120 },\n        //{name:\"priority\",    height:22, type:\"select\",   map_to:\"priority\", options:priority, default_value:\"Low\"},\n        {name:\"add\",        label:\"\",           width:44 }\n    ];\n    }\n\n    configSetup() {\n      gantt.config.wide_form = 1;\n      gantt.config.work_time = true;\n      gantt.config.order_branch = true;\n      gantt.config.autoscroll = true;\n      gantt.config.auto_scheduling = true;\n      gantt.config.autoscroll_speed = 100;\n      gantt.config.fit_tasks = true;\n      gantt.config.scale_unit = zoom.scale_unit;\n      gantt.config.duration_unit = \"hour\";\n      gantt.config.scale_height = 50;\n      gantt.config.min_column_width = 1000;\n      gantt.config.date_scale = zoom.date_scale;\n      gantt.config.open_tree_initially = true;\n      gantt.config.subscales = zoom.subscales;\n      gantt.templates.task_cell_class = function(task, date){\n        if(!gantt.isWorkTime({task:task, date: date}))\n          return \"week_end\";\n        return \"\";\n      };\n      gantt.setWorkTime({\n        hours: [9,17]\n      })\n      gantt.setWorkTime({ day:6, hours:false });\n      gantt.setWorkTime({ day:7, hours:false });\n      gantt.locale.labels[\"milestone\"] = \"Milestone\";\n      gantt.config.buttons_left = [\"dhx_save_btn\", \"dhx_cancel_btn\", \"milestone\"];\n      gantt.config.buttons_right = [\"dhx_delete_btn\"];\n      addTodayMarker();\n    }\n}"]},"metadata":{},"sourceType":"module"}